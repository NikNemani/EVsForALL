{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nikhil\\\\Downloads\\\\juniordesign\\\\EVsForALL\\\\frontend\\\\src\\\\pages\\\\Buy.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport Car from './Car'; // Import the Car component\nimport { useUser } from '../functions/userContext'; // Import the useUser hook\nimport '../styles/Buy.css';\nimport car1 from '../images/carpic1.jpeg'; // Update the correct path if needed\nimport Navbar from '../sections/Navbar.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Buy = () => {\n  _s();\n  const {\n    user: currentUser\n  } = useUser(); // Use the useUser hook to access current user\n  const [starredVehicles, setStarredVehicles] = useState([]);\n  useEffect(() => {\n    // Fetch starred vehicles for the user when the component mounts\n    if (currentUser) {\n      // Check if a user is logged in\n      fetchStarredVehicles();\n    }\n  }, [currentUser]); // Add currentUser as a dependency\n\n  const fetchStarredVehicles = async () => {\n    // API call to get starred vehicles for the current user\n    const response = await fetch(`/user-stars?username=${currentUser.username}`);\n    const data = await response.json();\n    setStarredVehicles(data);\n  };\n  const handleStar = async vehicleId => {\n    // API call to star a vehicle\n    await fetch('/star-vehicle', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: currentUser.username,\n        vehicle_id: vehicleId\n      })\n    });\n    fetchStarredVehicles();\n  };\n  const handleUnstar = async vehicleId => {\n    // API call to unstar a vehicle\n    await fetch('/unstar-vehicle', {\n      method: 'DELETE',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        username: currentUser.username,\n        vehicle_id: vehicleId\n      })\n    });\n    fetchStarredVehicles();\n  };\n\n  // Dummy data array for cars\n  const cars = [{\n    id: 1,\n    name: 'Audi e-tron GT 2022',\n    price: 30000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 2,\n    name: 'Audi e-tron GT 2021',\n    price: 20000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 3,\n    name: 'Audi e-tron GT 2024',\n    price: 10000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 4,\n    name: 'Audi e-tron GT 2012',\n    price: 40000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 5,\n    name: 'Audi e-tron GT 2011',\n    price: 50000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 6,\n    name: 'Audi e-tron GT 2010',\n    price: 70000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 1,\n    name: 'Audi e-tron GT 2022',\n    price: 30000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 1,\n    name: 'Audi e-tron GT 2022',\n    price: 30000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }, {\n    id: 1,\n    name: 'Audi e-tron GT 2022',\n    price: 30000,\n    image: car1,\n    mpg: 94,\n    capacity: 5\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Navbar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"buy-page\",\n      children: cars.map(car => /*#__PURE__*/_jsxDEV(Car, {\n        id: car.id,\n        name: car.name,\n        price: car.price,\n        image: car.image,\n        mpg: car.mpg,\n        capacity: car.capacity,\n        isStarred: starredVehicles.includes(car.id),\n        onStar: () => handleStar(car.id),\n        onUnstar: () => handleUnstar(car.id)\n      }, car.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n};\n_s(Buy, \"aoANg3IFZzXC/DcQh+BMonlEzeY=\", false, function () {\n  return [useUser];\n});\n_c = Buy;\nexport default Buy;\nvar _c;\n$RefreshReg$(_c, \"Buy\");","map":{"version":3,"names":["React","useState","useEffect","Car","useUser","car1","Navbar","jsxDEV","_jsxDEV","Buy","_s","user","currentUser","starredVehicles","setStarredVehicles","fetchStarredVehicles","response","fetch","username","data","json","handleStar","vehicleId","method","headers","body","JSON","stringify","vehicle_id","handleUnstar","cars","id","name","price","image","mpg","capacity","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","car","isStarred","includes","onStar","onUnstar","_c","$RefreshReg$"],"sources":["C:/Users/Nikhil/Downloads/juniordesign/EVsForALL/frontend/src/pages/Buy.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Car from './Car'; // Import the Car component\r\nimport { useUser } from '../functions/userContext'; // Import the useUser hook\r\nimport '../styles/Buy.css';\r\nimport car1 from '../images/carpic1.jpeg'; // Update the correct path if needed\r\nimport Navbar from '../sections/Navbar.js';\r\n\r\nconst Buy = () => {\r\n  const { user: currentUser } = useUser(); // Use the useUser hook to access current user\r\n  const [starredVehicles, setStarredVehicles] = useState([]);\r\n\r\n  useEffect(() => {\r\n    // Fetch starred vehicles for the user when the component mounts\r\n    if (currentUser) { // Check if a user is logged in\r\n      fetchStarredVehicles();\r\n    }\r\n  }, [currentUser]); // Add currentUser as a dependency\r\n\r\n  const fetchStarredVehicles = async () => {\r\n    // API call to get starred vehicles for the current user\r\n    const response = await fetch(`/user-stars?username=${currentUser.username}`);\r\n    const data = await response.json();\r\n    setStarredVehicles(data);\r\n  };\r\n\r\n  const handleStar = async (vehicleId) => {\r\n    // API call to star a vehicle\r\n    await fetch('/star-vehicle', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ username: currentUser.username, vehicle_id: vehicleId })\r\n    });\r\n    fetchStarredVehicles();\r\n  };\r\n\r\n  const handleUnstar = async (vehicleId) => {\r\n    // API call to unstar a vehicle\r\n    await fetch('/unstar-vehicle', {\r\n      method: 'DELETE',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ username: currentUser.username, vehicle_id: vehicleId })\r\n    });\r\n    fetchStarredVehicles();\r\n};\r\n\r\n  // Dummy data array for cars\r\n  const cars = [\r\n    { id: 1, name: 'Audi e-tron GT 2022', price: 30000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 2, name: 'Audi e-tron GT 2021', price: 20000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 3, name: 'Audi e-tron GT 2024', price: 10000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 4, name: 'Audi e-tron GT 2012', price: 40000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 5, name: 'Audi e-tron GT 2011', price: 50000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 6, name: 'Audi e-tron GT 2010', price: 70000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 1, name: 'Audi e-tron GT 2022', price: 30000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 1, name: 'Audi e-tron GT 2022', price: 30000, image: car1, mpg: 94, capacity: 5 },\r\n    { id: 1, name: 'Audi e-tron GT 2022', price: 30000, image: car1, mpg: 94, capacity: 5 }\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Navbar />\r\n      <div className=\"buy-page\">\r\n        {cars.map((car) => (\r\n          <Car\r\n            key={car.id}\r\n            id={car.id}\r\n            name={car.name}\r\n            price={car.price}\r\n            image={car.image}\r\n            mpg={car.mpg}\r\n            capacity={car.capacity}\r\n            isStarred={starredVehicles.includes(car.id)}\r\n            onStar={() => handleStar(car.id)}\r\n            onUnstar={() => handleUnstar(car.id)}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Buy;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}